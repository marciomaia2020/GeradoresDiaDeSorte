<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Combinações - Dia de Sorte</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- SheetJS para exportação Excel -->
    <script src="https://cdn.jsdelivr.net/npm/xlsx@0.18.5/dist/xlsx.full.min.js"></script>
	
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#5D5CDE',
                        'dia-orange': '#FF6B35',
                        'dia-yellow': '#FFB800',
                        'dia-light-orange': '#FFA366',
                        'dia-dark-orange': '#E55A2B',
                        'dia-cream': '#FFF8E1'
                    }
                }
            },
            darkMode: 'class'
        }
    </script>
<style>
 body, html {
        height: 100%;
        margin: 0;
    }

    .menu-centro {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 2rem 0;
        gap: 2rem;
    }

    .menu-analises {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 1rem;
        margin-bottom: 1rem;
    }

    .menu-numeros {
        display: flex;
        flex-wrap: wrap;
        justify-content: center;
        gap: 0.5rem;
        max-width: 600px;
    }

    .link-analise {
        text-decoration: none;
        color: black;
        padding: 12px 20px;
        border-radius: 8px;
        transition: all 0.3s ease;
        background-color: #f8f9fa;
        border: 2px solid #e9ecef;
        font-weight: 600;
        text-align: center;
        min-width: 180px;
        display: block;
    }
	   .link-analise1 {
        text-decoration: none;
        color: green;
        padding: 12px 20px;
        border-radius: 8px;
        transition: all 0.3s ease;
        background-color: #f8f9fa;
        border: 2px solid #e9ecef;
        font-weight: 600;
        text-align: center;
        min-width: 180px;
        display: block;
    }

    .link-numero {
        text-decoration: none;
        color: black;
        padding: 8px 12px;
        border-radius: 6px;
        transition: all 0.3s ease;
        background-color: #f8f9fa;
        border: 2px solid #e9ecef;
        font-weight: 600;
        text-align: center;
        min-width: 40px;
        display: block;
    }

    .link-analise:hover,
    .link-numero:hover {
        animation: alternaCores 1s infinite alternate;
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }
	.link-analise1:hover,
    .link-numero:hover {
        animation: alternaCores 1s infinite alternate;
        transform: translateY(-2px);
        box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    }

    @keyframes alternaCores {
        0% {
            background-color: #fff7e6;
        }
        100% {
            background-color: #ffc34d;
        }
    }

    /* Dark mode styles */
    .dark .link-analise,
    .dark .link-numero {
        background-color: #374151;
        border-color: #4b5563;
        color: #f9fafb;
    }

    .dark .link-analise:hover,
    .dark .link-numero:hover {
        animation: alternaCoresdark 1s infinite alternate;
    }


    @keyframes alternaCoresdark {
        0% {
            background-color: #451a03;
        }
        100% {
            background-color: #ea580c;
        }
    }
</style>

</head>
<body class="bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-200 min-h-screen">
    <!-- Detecção de tema escuro -->
    <script>
        if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
            document.documentElement.classList.add('dark');
        }
        window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
            if (event.matches) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        });
    </script>

    <!-- Layout com sidebar e conteúdo principal -->
    <div class="flex flex-col md:flex-row">
        <!-- Barra lateral com links -->
        <div class="w-full md:w-64 bg-gray-100 dark:bg-gray-800 p-4 md:min-h-screen">
            <div class="mb-6">
                <h3 class="text-lg font-bold mb-3 text-primary dark:text-blue-400">Ferramentas Dia de Sorte</h3>
                <div class="space-y-1">
                    <a href="./index.html" class="block py-1 px-2 rounded bg-primary/10 text-primary dark:text-blue-400 font-bold">Gerador de Combinações</a>
                    
					<div class="mt-3 mb-1 text-sm font-bold text-gray-600 dark:text-gray-400">ORDEM DE ANALISE 1</div>
					<a href="./ResultadosDigitosDiaDeSorte/index.html" target="_blank" class="block py-1 px-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700">A - Resultados Digitos </a>
					<a href="./AnalisePorCombinacao/" target="_blank" class="block py-1 px-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700">1- Análise por Combinação</a>
                    <a href="./AnalisadorCombinacoesJogos/index.html" target="_blank" class="block py-1 px-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700">2 - Analisador Combinações Jogos</a>
                    <a href="./CombinacaoUmDiadeSorte/index.html" target="_blank" class="block py-1 px-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700">3 - Combinação Um</a>
                    <a href="./DiaDeSorteConferidor/index.html" target="_blank" class="block py-1 px-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700">4 - Dia de Sorte Conferidor</a>
					<a href="./DiaDeSorteConferidor1/index.html" target="_blank" class="block py-1 px-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700">5 - Dia de Sorte Conferidor (Especifico)</a>

					<div class="mt-3 mb-1 text-sm font-bold text-gray-600 dark:text-gray-400">ORDEM DE ANALISE</div>
                    <a href="./CombinacaoDoisDiadeSorte/index.html" target="_blank" class="block py-1 px-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700">Combinacao Digitos II *</a>
					<a href="https://anacombindoisresuldigitos.netlify.app/" target="_blank" class="block py-1 px-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700">Análise de Combinações *</a>
                    <a href="./ConfAutoMaisQue1DiaDeSorte/index.html" target="_blank" class="block py-1 px-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700">Conferidor Automático +1 * </a>
					<a href="./ResumoDiaDeSorte/index.html" target="_blank" class="block py-1 px-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700">Resumo *</a>
                    <a href="./DiaDeSorteEstra/index.html" target="_blank" class="block py-1 px-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700">Extratégias I *</a>
                    <a href="./GeradorFinalDiaDeSorte/index.html" target="_blank" class="block py-1 px-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700">Gerador Final *</a>
					
					<div class="mt-3 mb-1 text-sm font-bold text-gray-600 dark:text-gray-400">DÍGITOS</div>
                    <a href="./GeradorBaseadoEmDigitosDiaDeSorte/index.html" target="_blank" class="block py-1 px-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700">Baseado em Dígitos</a>
                    
					<div class="mt-3 mb-1 text-sm font-bold text-gray-600 dark:text-gray-400">CALCULADORA</div>
                    <a href="./CalculadoraCusto/index.html" target="_blank" class="block py-1 px-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700">Calculadora de Custos</a>

					<div class="mt-3 mb-1 text-sm font-bold text-gray-600 dark:text-gray-400">ESTRATÉGIAS</div>
                    <a href="./QuadraDuplasTrincas/index.html" target="_blank" class="block py-1 px-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700">Quadra Duplas & Trincas</a>
                    
                    <div class="mt-3 mb-1 text-sm font-bold text-gray-600 dark:text-gray-400">CONFERIDOES</div>
                    <a href="./ConfAuto1DiaDeSorte/index.html" target="_blank" class="block py-1 px-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700">Conferidor Automático 1</a>
                    
                    <div class="mt-3 mb-1 text-sm font-bold text-gray-600 dark:text-gray-400">ANÁLISES</div>
                    <a href="./DiaDeSorteDesdobramento/index.html" target="_blank" class="block py-1 px-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700">Desdobramento</a>
                    <a href="./ResultadosAlteradosDiaDeSorte/index.html" target="_blank" class="block py-1 px-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700">Resultados Alterados</a>
                    
                    <div class="mt-3 mb-1 text-sm font-bold text-gray-600 dark:text-gray-400">OUTROS</div>
                    <a href="./DiaDeSorteCal/index.html" target="_blank" class="block py-1 px-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700">Calculadora</a>
                    <a href="./DiaDeSorteCom/index.html" target="_blank" class="block py-1 px-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700">Comissão</a>
                    <a href="./DiaDeSorteCur/index.html" target="_blank" class="block py-1 px-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700">Curiosidades</a>
                    <a href="./DiaDeSorteIa/index.html" target="_blank" class="block py-1 px-2 rounded hover:bg-gray-200 dark:hover:bg-gray-700">Inteligência Artificial</a>
                </div>
            </div>
        </div>
		
		

        <!-- Conteúdo principal -->
        <div class="flex-1 p-4">
            <h1 class="text-2xl font-bold text-center mb-6">Gerador de Combinações - Dia de Sorte (TODAS as combinações)</h1>
            
			<hr />
				<div class="menu-centro">
					<!-- Primeira linha: Links especiais -->
					<div class="menu-analises">
						<a href="index-pares-impares-df.html/" target="_blank" class="link-analise">Pares Vs Impares - DF</a>
						<a href="index-melhorescombinacoes.html/" target="_blank" class="link-analise">Melhores Combinações</a>
						<a href="index-analisecompleta.html/" target="_blank" class="link-analise1">Análise Completa *</a>
					    <a href="index-analisecombinacoespossiveis.html/" target="_blank" class="link-analise1">Análise Combinações Possiveis *</a>
					</div>
					
					<!-- Segunda linha: Números 1-10 -->
					<div class="menu-numeros">
						<a href="index1.html/" target="_blank" class="link-numero">1</a>
						<a href="index2.html/" target="_blank" class="link-numero">2</a>
						<a href="index3.html/" target="_blank" class="link-numero">3</a>
						<a href="index4.html/" target="_blank" class="link-numero">4</a>
						<a href="index5.html" target="_blank" class="link-numero">5</a>
						<a href="index6.html" target="_blank" class="link-numero">6</a>
						<a href="index7.html/" target="_blank" class="link-numero">7</a>
						<a href="index8.html/" target="_blank" class="link-numero">8</a>
						<a href="index9.html/" target="_blank" class="link-numero">9</a>
						<a href="index10.html/" target="_blank" class="link-numero">10</a>
					</div>
				</div>
			<hr />

<!-- Header -->
<header class="bg-gradient-to-r from-dia-orange to-dia-yellow shadow-lg">
    <div class="container mx-auto px-4 py-6">
        <div class="flex items-center justify-between">
            <div class="flex items-center space-x-3">
                <i class="fas fa-dice text-white text-3xl"></i>
                <div>
                    <h1 class="text-white text-2xl font-bold">Gerador Dia de Sorte Pro (4 Dígitos)</h1>
                    <p class="text-orange-100 text-sm">2.100.000 jogos - TODAS as 210 combinações de 4 dígitos</p>
                </div>
            </div>
            <div class="text-white text-right">
                <p class="text-sm">Último sorteio:</p>
                <p id="last-draw" class="font-semibold">Carregando...</p>
            </div>
        </div>
    </div>
</header>

<div class="container mx-auto px-4 py-8">
    <!-- Configuração do Jogo -->
    <div class="bg-white dark:bg-gray-800 rounded-xl shadow-xl p-6 mb-8">
        <h2 class="text-2xl font-bold text-gray-800 dark:text-white mb-6 flex items-center">
            <i class="fas fa-cog text-dia-orange mr-3"></i>
            Configuração dos Jogos (4 Dígitos)
        </h2>

        <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
            <!-- Coluna 1 -->
            <div class="space-y-6">
                <!-- Quantidade de Jogos -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        Quantos jogos você pretende fazer?
                    </label>
                    <input type="number" id="num-games" min="10" max="2100000" value="2100000" placeholder="Digite de 10 a 2.100.000"
                           class="w-full px-4 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-dia-orange focus:border-transparent dark:bg-gray-700 dark:text-white">
                    <div class="mt-2 space-y-1">
                        <p class="text-xs text-gray-500">Máximo: 2.100.000 jogos (TODAS as 210 combinações de 4 dígitos)</p>
                        <div class="bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3 mt-3">
                            <h4 class="text-sm font-semibold text-blue-800 dark:text-blue-300 mb-2">📊 Distribuição das 210 Combinações de 4 Dígitos:</h4>
                            <div class="grid grid-cols-1 gap-2 text-xs">
                                <div class="text-center font-bold text-purple-600">C(10,4) = 210 combinações únicas</div>
                                <div class="text-center">• 210 combinações × 10.000 = 2.100.000 jogos</div>
                                <div class="text-center">• Estratégia iniciante: Boa introdução aos dígitos</div>
                                <div class="text-center">• Equilibrio: Cobertura moderada com investimento controlado</div>
                            </div>
                            <div class="text-xs font-bold text-blue-800 dark:text-blue-300 mt-2 border-t pt-2">
                                Total: 2.100.000 jogos únicos possíveis (4 dígitos)
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Dezenas Fixas -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        Dezenas Fixas (opcional)
                    </label>
                    <div class="grid grid-cols-6 gap-2 mb-3">
                        <div id="fixed-numbers" class="col-span-6 grid grid-cols-10 gap-1">
                            <!-- Números de 1 a 31 serão gerados aqui -->
                        </div>
                    </div>
                    <p class="text-xs text-gray-500">Selecione até 3 dezenas fixas para jogos de 4 dígitos</p>
                </div>

                <!-- Quantidade de Números -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        Quantidade de números por jogo
                    </label>
                    <select id="numbers-count" class="w-full px-4 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-dia-orange focus:border-transparent dark:bg-gray-700 dark:text-white">
                        <option value="7">7 números - R$ 2,50 (1 aposta) ⭐ Recomendado para 4 dígitos</option>
                        <option value="8">8 números - R$ 20,00 (8 apostas)</option>
                        <option value="9">9 números - R$ 90,00 (36 apostas)</option>
                        <option value="10">10 números - R$ 300,00 (120 apostas)</option>
                        <option value="11">11 números - R$ 825,00 (330 apostas)</option>
                        <option value="12">12 números - R$ 1.980,00 (742 apostas)</option>
                        <option value="custom">Valor personalizado</option>
                    </select>
                    
                    <!-- Campo de valor personalizado -->
                    <div id="custom-value-container" class="hidden mt-3">
                        <label class="block text-xs font-medium text-gray-600 dark:text-gray-400 mb-1">
                            Valor por jogo (R$)
                        </label>
                        <input type="number" id="custom-value" min="2.50" max="20000" step="0.01" value="2.50"
                               class="w-full px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-dia-orange focus:border-transparent dark:bg-gray-700 dark:text-white">
                    </div>
                    
                    <p class="text-xs text-gray-500 mt-1">Valor total: <span id="total-value">R$ 5.250.000,00</span></p>
                    
                    <!-- Info sobre 4 dígitos -->
                    <div class="mt-2 bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-3">
                        <p class="text-xs text-green-700 dark:text-green-300">
                            <i class="fas fa-star text-yellow-500 mr-1"></i>
                            <strong>4 dígitos</strong> oferecem estratégia iniciante ideal.
                            Perfeito para começar com o sistema de dígitos!
                        </p>
                    </div>
                </div>
            </div>

            <!-- Coluna 2 -->
            <div class="space-y-6">
                <!-- Mês da Sorte -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2">
                        Mês da Sorte
                    </label>
                    <select id="lucky-month" class="w-full px-4 py-3 text-base border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-dia-orange focus:border-transparent dark:bg-gray-700 dark:text-white">
                        <option value="">Aleatório</option>
                        <option value="Janeiro">Janeiro</option>
                        <option value="Fevereiro">Fevereiro</option>
                        <option value="Março">Março</option>
                        <option value="Abril">Abril</option>
                        <option value="Maio">Maio</option>
                        <option value="Junho">Junho</option>
                        <option value="Julho">Julho</option>
                        <option value="Agosto">Agosto</option>
                        <option value="Setembro">Setembro</option>
                        <option value="Outubro">Outubro</option>
                        <option value="Novembro">Novembro</option>
                        <option value="Dezembro">Dezembro</option>
                    </select>
                </div>
            </div>
        </div>

        <!-- Calculadora Dinâmica de Jogos -->
        <div class="mt-6 bg-gradient-to-r from-blue-50 to-green-50 dark:from-blue-900/20 dark:to-green-900/20 border-2 border-blue-200 dark:border-blue-700 rounded-xl p-6">
            <h3 class="text-lg font-bold text-center text-blue-800 dark:text-blue-300 mb-4">
                🎯 Calculadora de Jogos - TODAS as 210 Combinações de 4 Dígitos
            </h3>
            
            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                <div class="text-center p-3 bg-white dark:bg-gray-800 rounded-lg border border-blue-200 dark:border-blue-700">
                    <div class="text-sm text-gray-600 dark:text-gray-400">Total Máximo</div>
                    <div class="text-2xl font-bold text-blue-600">2.100.000</div>
                    <div class="text-xs text-gray-500">210 combinações de 4 dígitos</div>
                </div>
                
                <div class="text-center p-3 bg-white dark:bg-gray-800 rounded-lg border border-green-200 dark:border-green-700">
                    <div class="text-sm text-gray-600 dark:text-gray-400">Jogos Selecionados</div>
                    <div id="estimated-games" class="text-2xl font-bold text-green-600">2.100.000</div>
                    <div class="text-xs text-gray-500">valor do campo acima</div>
                </div>
                
                <div class="text-center p-3 bg-white dark:bg-gray-800 rounded-lg border border-orange-200 dark:border-orange-700">
                    <div class="text-sm text-gray-600 dark:text-gray-400">Cobertura</div>
                    <div id="coverage-percentage" class="text-2xl font-bold text-orange-600">100%</div>
                    <div class="text-xs text-gray-500">de todas as combinações</div>
                </div>
            </div>
            
            <!-- Valor Total Estimado -->
            <div class="text-center p-3 bg-gradient-to-r from-dia-orange to-dia-yellow rounded-lg text-white">
                <div class="text-sm opacity-90">Investimento Total</div>
                <div id="estimated-investment" class="text-xl font-bold">R$ 5.250.000,00</div>
            </div>
        </div>

        <!-- Botão Gerar -->
        <div class="mt-8 text-center">
            <button id="generate-btn" class="bg-gradient-to-r from-dia-orange to-dia-yellow text-white px-8 py-4 rounded-lg font-semibold text-lg hover:from-dia-dark-orange hover:to-orange-500 transition-all duration-300 shadow-lg hover:shadow-xl">
                <i class="fas fa-magic mr-2"></i>
                Gerar Jogos (4 Dígitos)
            </button>
			<p class="mt-2 text-sm text-gray-600 dark:text-gray-400">Confira <a href="https://geradoresdiadesorte.netlify.app/diadesorteconferidor/" target="_blank" class="text-dia-orange hover:underline">aqui</a> os melhores palpites</p>
        </div>
    </div>

    <!-- Resultados -->
    <div id="results-section" class="hidden">
        <!-- Estatísticas e Busca -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-xl p-6 mb-6">
            <div class="flex flex-col lg:flex-row justify-between items-center gap-4">
                <div class="flex items-center space-x-6">
                    <div class="text-center">
                        <p class="text-sm text-gray-600 dark:text-gray-400">Total de Jogos</p>
                        <p id="total-games" class="text-2xl font-bold text-dia-orange">0</p>
                    </div>
                    <div class="text-center">
                        <p class="text-sm text-gray-600 dark:text-gray-400">Investimento</p>
                        <p id="total-investment" class="text-2xl font-bold text-green-600">R$ 0,00</p>
                    </div>
                    <div class="text-center">
                        <p class="text-sm text-gray-600 dark:text-gray-400">Apostas Totais</p>
                        <p id="total-bets" class="text-2xl font-bold text-blue-600">0</p>
                    </div>
                </div>
                
                <!-- Busca -->
                <div class="flex items-center space-x-4">
                    <div class="relative">
                        <input type="text" id="search-input" placeholder="Digite números (ex: 11 17 20 22)..." 
                               class="pl-10 pr-4 py-2 text-base border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-dia-orange focus:border-transparent dark:bg-gray-700 dark:text-white">
                        <i class="fas fa-search absolute left-3 top-3 text-gray-400"></i>
                    </div>
                    <!-- Botões de Export -->
                    <div class="flex space-x-2">
                        <button onclick="exportToTXT()" class="px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors flex items-center">
                            <i class="fas fa-file-alt mr-2"></i>
                            TXT
                        </button>
                        <button onclick="exportToXLS()" class="px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center">
                            <i class="fas fa-file-excel mr-2"></i>
                            XLS
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Lista de Jogos -->
        <div class="bg-white dark:bg-gray-800 rounded-xl shadow-xl p-6">
            <h3 class="text-xl font-bold text-gray-800 dark:text-white mb-6 flex items-center">
                <i class="fas fa-list text-dia-orange mr-3"></i>
                Seus Jogos Gerados (4 Dígitos)
            </h3>
            
            <div id="games-container" class="space-y-4">
                <!-- Jogos serão inseridos aqui -->
            </div>

            <!-- Paginação -->
            <div id="pagination" class="flex justify-center items-center mt-8 space-x-2">
                <!-- Controles de paginação -->
            </div>
        </div>
    </div>
</div>

<script>
    // Configuração do tema
    if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.documentElement.classList.add('dark');
    }
    window.matchMedia('(prefers-color-scheme: dark)').addEventListener('change', event => {
        if (event.matches) {
            document.documentElement.classList.add('dark');
        } else {
            document.documentElement.classList.remove('dark');
        }
    });

    // Variáveis globais
    let allGames = [];
    let filteredGames = [];
    let currentPage = 1;
    const gamesPerPage = 20;

    // ===== TODAS as 210 combinações de 4 dígitos =====
    const ALL_4_DIGIT_COMBINATIONS = [
        [0,1,2,3], [0,1,2,4], [0,1,2,5], [0,1,2,6], [0,1,2,7], [0,1,2,8], [0,1,2,9],
        [0,1,3,4], [0,1,3,5], [0,1,3,6], [0,1,3,7], [0,1,3,8], [0,1,3,9],
        [0,1,4,5], [0,1,4,6], [0,1,4,7], [0,1,4,8], [0,1,4,9],
        [0,1,5,6], [0,1,5,7], [0,1,5,8], [0,1,5,9],
        [0,1,6,7], [0,1,6,8], [0,1,6,9],
        [0,1,7,8], [0,1,7,9],
        [0,1,8,9],
        [0,2,3,4], [0,2,3,5], [0,2,3,6], [0,2,3,7], [0,2,3,8], [0,2,3,9],
        [0,2,4,5], [0,2,4,6], [0,2,4,7], [0,2,4,8], [0,2,4,9],
        [0,2,5,6], [0,2,5,7], [0,2,5,8], [0,2,5,9],
        [0,2,6,7], [0,2,6,8], [0,2,6,9],
        [0,2,7,8], [0,2,7,9],
        [0,2,8,9],
        [0,3,4,5], [0,3,4,6], [0,3,4,7], [0,3,4,8], [0,3,4,9],
        [0,3,5,6], [0,3,5,7], [0,3,5,8], [0,3,5,9],
        [0,3,6,7], [0,3,6,8], [0,3,6,9],
        [0,3,7,8], [0,3,7,9],
        [0,3,8,9],
        [0,4,5,6], [0,4,5,7], [0,4,5,8], [0,4,5,9],
        [0,4,6,7], [0,4,6,8], [0,4,6,9],
        [0,4,7,8], [0,4,7,9],
        [0,4,8,9],
        [0,5,6,7], [0,5,6,8], [0,5,6,9],
        [0,5,7,8], [0,5,7,9],
        [0,5,8,9],
        [0,6,7,8], [0,6,7,9],
        [0,6,8,9],
        [0,7,8,9],
        [1,2,3,4], [1,2,3,5], [1,2,3,6], [1,2,3,7], [1,2,3,8], [1,2,3,9],
        [1,2,4,5], [1,2,4,6], [1,2,4,7], [1,2,4,8], [1,2,4,9],
        [1,2,5,6], [1,2,5,7], [1,2,5,8], [1,2,5,9],
        [1,2,6,7], [1,2,6,8], [1,2,6,9],
        [1,2,7,8], [1,2,7,9],
        [1,2,8,9],
        [1,3,4,5], [1,3,4,6], [1,3,4,7], [1,3,4,8], [1,3,4,9],
        [1,3,5,6], [1,3,5,7], [1,3,5,8], [1,3,5,9],
        [1,3,6,7], [1,3,6,8], [1,3,6,9],
        [1,3,7,8], [1,3,7,9],
        [1,3,8,9],
        [1,4,5,6], [1,4,5,7], [1,4,5,8], [1,4,5,9],
        [1,4,6,7], [1,4,6,8], [1,4,6,9],
        [1,4,7,8], [1,4,7,9],
        [1,4,8,9],
        [1,5,6,7], [1,5,6,8], [1,5,6,9],
        [1,5,7,8], [1,5,7,9],
        [1,5,8,9],
        [1,6,7,8], [1,6,7,9],
        [1,6,8,9],
        [1,7,8,9],
        [2,3,4,5], [2,3,4,6], [2,3,4,7], [2,3,4,8], [2,3,4,9],
        [2,3,5,6], [2,3,5,7], [2,3,5,8], [2,3,5,9],
        [2,3,6,7], [2,3,6,8], [2,3,6,9],
        [2,3,7,8], [2,3,7,9],
        [2,3,8,9],
        [2,4,5,6], [2,4,5,7], [2,4,5,8], [2,4,5,9],
        [2,4,6,7], [2,4,6,8], [2,4,6,9],
        [2,4,7,8], [2,4,7,9],
        [2,4,8,9],
        [2,5,6,7], [2,5,6,8], [2,5,6,9],
        [2,5,7,8], [2,5,7,9],
        [2,5,8,9],
        [2,6,7,8], [2,6,7,9],
        [2,6,8,9],
        [2,7,8,9],
        [3,4,5,6], [3,4,5,7], [3,4,5,8], [3,4,5,9],
        [3,4,6,7], [3,4,6,8], [3,4,6,9],
        [3,4,7,8], [3,4,7,9],
        [3,4,8,9],
        [3,5,6,7], [3,5,6,8], [3,5,6,9],
        [3,5,7,8], [3,5,7,9],
        [3,5,8,9],
        [3,6,7,8], [3,6,7,9],
        [3,6,8,9],
        [3,7,8,9],
        [4,5,6,7], [4,5,6,8], [4,5,6,9],
        [4,5,7,8], [4,5,7,9],
        [4,5,8,9],
        [4,6,7,8], [4,6,7,9],
        [4,6,8,9],
        [4,7,8,9],
        [5,6,7,8], [5,6,7,9],
        [5,6,8,9],
        [5,7,8,9],
        [6,7,8,9]
    ];

    // Total máximo de jogos para 4 dígitos = 2.100.000
    const MAX_TOTAL_GAMES = 2100000;

    // Inicialização
    document.addEventListener('DOMContentLoaded', function() {
        initializeApp();
    });

    function initializeApp() {
        createFixedNumbersGrid();
        setupEventListeners();
        updateTotalValue();
    }

    function createFixedNumbersGrid() {
        const container = document.getElementById('fixed-numbers');
        for (let i = 1; i <= 31; i++) {
            const button = document.createElement('button');
            button.type = 'button';
            button.className = 'w-8 h-8 text-xs border border-gray-300 dark:border-gray-600 rounded hover:bg-dia-orange hover:text-white transition-all duration-200 dark:text-white';
            button.textContent = i.toString().padStart(2, '0');
            button.dataset.number = i;
            button.onclick = toggleFixedNumber;
            container.appendChild(button);
        }
    }

    function toggleFixedNumber(event) {
        const button = event.target;
        const selectedButtons = document.querySelectorAll('#fixed-numbers button.bg-dia-orange');
        
        if (button.classList.contains('bg-dia-orange')) {
            button.classList.remove('bg-dia-orange', 'text-white');
            button.classList.add('hover:bg-dia-orange', 'hover:text-white');
        } else if (selectedButtons.length < 3) { // Máximo 3 para jogos de 4 dígitos
            button.classList.add('bg-dia-orange', 'text-white');
            button.classList.remove('hover:bg-dia-orange', 'hover:text-white');
        } else {
            showAlert('Você pode selecionar no máximo 3 dezenas fixas para jogos de 4 dígitos.');
        }
        updateCalculator();
    }

    function setupEventListeners() {
        document.getElementById('num-games').addEventListener('input', updateTotalValue);
        document.getElementById('numbers-count').addEventListener('change', updateTotalValue);
        document.getElementById('generate-btn').addEventListener('click', generateGames);
        document.getElementById('search-input').addEventListener('input', filterGames);
        document.getElementById('custom-value').addEventListener('input', updateTotalValue);
    }

    function updateTotalValue() {
        const numGames = parseInt(document.getElementById('num-games').value) || 0;
        const numbersCount = document.getElementById('numbers-count').value;
        
        let price = 2.50; // Preço padrão para 7 números (4 dígitos)
        
        if (numbersCount === 'custom') {
            document.getElementById('custom-value-container').classList.remove('hidden');
            price = parseFloat(document.getElementById('custom-value').value) || 2.50;
        } else {
            document.getElementById('custom-value-container').classList.add('hidden');
            
            const gameData = {
                7: { price: 2.50, bets: 1 },
                8: { price: 20.00, bets: 8 },
                9: { price: 90.00, bets: 36 },
                10: { price: 300.00, bets: 120 },
                11: { price: 825.00, bets: 330 },
                12: { price: 1980.00, bets: 742 }
            };
            
            const data = gameData[parseInt(numbersCount)] || gameData[7];
            price = data.price;
        }
        
        const total = numGames * price;
        document.getElementById('total-value').textContent = `R$ ${total.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
        
        updateCalculator();
    }

    function updateCalculator() {
        const numGames = parseInt(document.getElementById('num-games').value) || 0;
        const coverage = Math.min((numGames / MAX_TOTAL_GAMES) * 100, 100).toFixed(1);
        
        document.getElementById('estimated-games').textContent = numGames.toLocaleString();
        document.getElementById('coverage-percentage').textContent = `${coverage}%`;
        
        const numbersCount = document.getElementById('numbers-count').value;
        let price = 2.50;
        if (numbersCount === 'custom') {
            price = parseFloat(document.getElementById('custom-value').value) || 2.50;
        } else {
            const gameData = {
                7: 2.50, 8: 20.00, 9: 90.00, 10: 300.00, 11: 825.00, 12: 1980.00
            };
            price = gameData[parseInt(numbersCount)] || 2.50;
        }
        
        const investment = numGames * price;
        document.getElementById('estimated-investment').textContent = `R$ ${investment.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
    }

    async function generateGames() {
        const numGames = parseInt(document.getElementById('num-games').value);
        
        if (!numGames || numGames < 10 || numGames > MAX_TOTAL_GAMES) {
            showAlert(`Número de jogos inválido. Digite entre 10 e ${MAX_TOTAL_GAMES.toLocaleString()} jogos.`);
            return;
        }

        showLoading(true);
        
        try {
            const config = getGameConfig();
            allGames = [];

            const batchSize = 1000;
            const batches = Math.ceil(numGames / batchSize);

            for (let batch = 0; batch < batches; batch++) {
                const batchStart = batch * batchSize;
                const batchEnd = Math.min(batchStart + batchSize, numGames);
                const batchGames = [];

                for (let i = batchStart; i < batchEnd; i++) {
                    const game = generateSingleGame(config);
                    batchGames.push({
                        id: i + 1,
                        numbers: game.numbers,
                        month: game.month,
                        sum: game.numbers.reduce((a, b) => a + b, 0)
                    });
                }

                allGames.push(...batchGames);

                if (batch < batches - 1) {
                    await new Promise(resolve => setTimeout(resolve, 10));
                }
            }

            filteredGames = [...allGames];
            currentPage = 1;
            displayResults();
            
        } catch (error) {
            console.error('Erro ao gerar jogos:', error);
            showAlert('Erro ao gerar jogos. Tente novamente.');
        } finally {
            showLoading(false);
        }
    }

    function getGameConfig() {
        const fixedNumbers = Array.from(document.querySelectorAll('#fixed-numbers button.bg-dia-orange'))
            .map(btn => parseInt(btn.dataset.number));
        
        return {
            fixedNumbers,
            luckyMonth: document.getElementById('lucky-month').value
        };
    }

    function generateSingleGame(config) {
        let numbers = [...config.fixedNumbers];
        const targetNumbers = parseInt(document.getElementById('numbers-count').value) || 7;
        
        // Selecionar combinação de 4 dígitos aleatória
        const randomCombination = ALL_4_DIGIT_COMBINATIONS[Math.floor(Math.random() * ALL_4_DIGIT_COMBINATIONS.length)];
        
        // Converter dígitos para números do jogo (1-31)
        const availableNumbers = [];
        for (let i = 1; i <= 31; i++) {
            if (!numbers.includes(i)) {
                const lastDigit = i % 10;
                if (randomCombination.includes(lastDigit)) {
                    availableNumbers.push(i);
                }
            }
        }

        // Completar o jogo
        while (numbers.length < targetNumbers && availableNumbers.length > 0) {
            const index = Math.floor(Math.random() * availableNumbers.length);
            const selectedNumber = availableNumbers.splice(index, 1)[0];
            numbers.push(selectedNumber);
        }

        // Se precisar completar com mais números
        while (numbers.length < targetNumbers) {
            const remaining = [];
            for (let i = 1; i <= 31; i++) {
                if (!numbers.includes(i)) remaining.push(i);
            }
            if (remaining.length === 0) break;
            
            const randomIndex = Math.floor(Math.random() * remaining.length);
            numbers.push(remaining[randomIndex]);
        }

        numbers.sort((a, b) => a - b);

        // Definir mês da sorte
        let month = config.luckyMonth;
        if (!month) {
            const months = ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho',
                          'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'];
            month = months[Math.floor(Math.random() * months.length)];
        }

        return { numbers, month };
    }

    function filterGames() {
        const searchTerm = document.getElementById('search-input').value.trim();
        
        if (!searchTerm) {
            filteredGames = [...allGames];
        } else {
            const searchNumbers = [];
            const cleanSearch = searchTerm.replace(/[,-]/g, ' ');
            const parts = cleanSearch.split(/\s+/).filter(part => part.length > 0);
            
            for (const part of parts) {
                const num = parseInt(part);
                if (!isNaN(num) && num >= 1 && num <= 31) {
                    searchNumbers.push(num);
                }
            }
            
            if (searchNumbers.length > 0) {
                filteredGames = allGames.filter(game => {
                    return searchNumbers.every(searchNum => game.numbers.includes(searchNum));
                });
            } else {
                filteredGames = allGames.filter(game => {
                    return game.month.toLowerCase().includes(searchTerm.toLowerCase()) ||
                           game.id.toString().includes(searchTerm);
                });
            }
        }
        
        currentPage = 1;
        displayGames();
        updatePagination();
    }

    function displayResults() {
        document.getElementById('results-section').classList.remove('hidden');
        document.getElementById('total-games').textContent = allGames.length.toLocaleString();
        
        const numbersCount = parseInt(document.getElementById('numbers-count').value) || 7;
        const gameData = {
            7: { price: 2.50, bets: 1 },
            8: { price: 20.00, bets: 8 },
            9: { price: 90.00, bets: 36 },
            10: { price: 300.00, bets: 120 },
            11: { price: 825.00, bets: 330 },
            12: { price: 1980.00, bets: 742 }
        };
        
        const data = gameData[numbersCount] || gameData[7];
        const investment = allGames.length * data.price;
        const totalBets = allGames.length * data.bets;
        
        document.getElementById('total-investment').textContent = 
            `R$ ${investment.toLocaleString('pt-BR', {minimumFractionDigits: 2})}`;
        document.getElementById('total-bets').textContent = totalBets.toLocaleString();
        
        displayGames();
        updatePagination();
    }

    function displayGames() {
        const container = document.getElementById('games-container');
        const startIndex = (currentPage - 1) * gamesPerPage;
        const endIndex = startIndex + gamesPerPage;
        const gamesToShow = filteredGames.slice(startIndex, endIndex);

        container.innerHTML = gamesToShow.map(game => {
            return `
                <div class="border border-gray-200 dark:border-gray-600 rounded-lg p-4 hover:shadow-md transition-shadow duration-300">
                    <div class="flex justify-between items-center">
                        <div class="flex items-center space-x-4">
                            <span class="text-sm font-medium text-gray-500 dark:text-gray-400">Jogo #${game.id}</span>
                            <div class="flex space-x-2">
                                ${game.numbers.map(num => 
                                    `<span class="w-8 h-8 bg-gradient-to-br from-dia-orange to-dia-yellow text-white rounded-full flex items-center justify-center text-sm font-bold">${num.toString().padStart(2, '0')}</span>`
                                ).join('')}
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-sm text-gray-600 dark:text-gray-400">Mês da Sorte</div>
                            <div class="font-semibold text-dia-orange">${game.month}</div>
                            <div class="text-xs text-gray-500">Soma: ${game.sum}</div>
                        </div>
                    </div>
                </div>
            `;
        }).join('');
    }

    function updatePagination() {
        const totalPages = Math.ceil(filteredGames.length / gamesPerPage);
        const container = document.getElementById('pagination');
        
        if (totalPages <= 1) {
            container.innerHTML = '';
            return;
        }

        let paginationHTML = '';
        
        if (currentPage > 1) {
            paginationHTML += `
                <button onclick="changePage(${currentPage - 1})" 
                        class="px-3 py-2 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600">
                    <i class="fas fa-chevron-left"></i>
                </button>
            `;
        }

        const startPage = Math.max(1, currentPage - 2);
        const endPage = Math.min(totalPages, currentPage + 2);

        for (let i = startPage; i <= endPage; i++) {
            const activeClass = i === currentPage ? 'bg-dia-orange text-white' : 'bg-white dark:bg-gray-700 hover:bg-gray-50 dark:hover:bg-gray-600';
            paginationHTML += `
                <button onclick="changePage(${i})" 
                        class="px-3 py-2 text-sm ${activeClass} border border-gray-300 dark:border-gray-600 rounded-md">
                    ${i}
                </button>
            `;
        }

        if (currentPage < totalPages) {
            paginationHTML += `
                <button onclick="changePage(${currentPage + 1})" 
                        class="px-3 py-2 text-sm bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-md hover:bg-gray-50 dark:hover:bg-gray-600">
                    <i class="fas fa-chevron-right"></i>
                </button>
            `;
        }

        container.innerHTML = paginationHTML;
    }

    function changePage(page) {
        currentPage = page;
        displayGames();
        updatePagination();
    }

    function showLoading(show) {
        const loading = document.getElementById('loading');
        if (loading) {
            loading.classList.toggle('hidden', !show);
        }
    }

    function showAlert(message) {
        const modal = document.createElement('div');
        modal.className = 'fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50';
        modal.innerHTML = `
            <div class="bg-white dark:bg-gray-800 p-6 rounded-lg shadow-lg max-w-sm w-full mx-4">
                <div class="flex items-center mb-4">
                    <i class="fas fa-info-circle text-dia-orange text-xl mr-3"></i>
                    <h3 class="text-lg font-semibold text-gray-800 dark:text-white">Aviso</h3>
                </div>
                <p class="text-gray-700 dark:text-gray-300 mb-6">${message}</p>
                <div class="flex justify-end">
                    <button class="px-4 py-2 bg-dia-orange text-white hover:bg-dia-dark-orange rounded transition-colors" 
                            onclick="this.closest('.fixed').remove()">
                        OK
                    </button>
                </div>
            </div>
        `;
        document.body.appendChild(modal);
    }

    function exportToTXT() {
        if (allGames.length === 0) {
            showAlert('Nenhum jogo foi gerado ainda!');
            return;
        }

        let txtContent = '';
        allGames.forEach(game => {
            const numbersStr = game.numbers.map(n => n.toString().padStart(2, '0')).join('-');
            txtContent += `${numbersStr} ${game.month}\n`;
        });

        const blob = new Blob([txtContent], { type: 'text/plain' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `dia-sorte-4-digitos-${new Date().toISOString().split('T')[0]}.txt`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        window.URL.revokeObjectURL(url);
    }

    function exportToXLS() {
        if (allGames.length === 0) {
            showAlert('Nenhum jogo foi gerado ainda!');
            return;
        }

        let csvContent = '\uFEFFNúmeros (4 Dígitos),Mês da Sorte\n';
        allGames.forEach(game => {
            const numbersStr = game.numbers.map(n => n.toString().padStart(2, '0')).join('-');
            csvContent += `"${numbersStr}","${game.month}"\n`;
        });

        const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });
        const url = window.URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = `dia-sorte-4-digitos-${new Date().toISOString().split('T')[0]}.csv`;
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        window.URL.revokeObjectURL(url);
    }

    // Loading modal
    const loadingHTML = `
        <div id="loading" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
            <div class="bg-white dark:bg-gray-800 p-8 rounded-xl shadow-2xl text-center">
                <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-dia-orange mx-auto mb-4"></div>
                <p class="text-gray-700 dark:text-gray-300">Gerando seus jogos de 4 dígitos...</p>
            </div>
        </div>
    `;
    document.body.insertAdjacentHTML('beforeend', loadingHTML);
</script>
	</body>
</html>